<!DOCTYPE html><html><head><meta content="width=device-width" name=viewport><link href=/bundle.css rel=stylesheet><script src=/bundle.js defer></script><script src=/check.js async></script><link href=/favicon.ico rel="shortcut icon"><link href=/favicon.svg rel=icon><title>在安装VS生成工具时规避.NET安装错误 - kkocdko's blog</title><meta content="提示“未能安装包Microsoft.Net.4.7.2.FullRedist...”" name=description><meta content=rgb(63,81,181) name=theme-color></head><body><main><article class=card><h1 id=在安装vs生成工具时规避net安装错误>在安装VS生成工具时规避.NET安装错误</h1><blockquote><p>本人使用<code>Visual Studio Build Tools （生成工具） 2019 16.4.29806.167</code>。理论上，此教程也适配其他版本。</p><p>安装完整<code>Visual Studio 2019</code>时出此错误也可尝试本方案。</p></blockquote><h3 id=prefaces>Prefaces</h3><blockquote><p>“Visual Studio 2019生成工具。使用此类生成工具，可以通过命令行接口生成Visual Studio项目”</p><p><a href=https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019>https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019</a></p></blockquote><p>本人往常在写Rust的时候习惯于使用<code>Rustc</code>+<code>VSBuildTools</code>+<code>VSCode</code>，然而最近在安装<code>VSBuildTools</code>的时候遇到了一点麻烦。</p><p>安装时出现错误，无法继续。错误信息为<code>未能安装包Microsoft.Net.4.7.2.FullRedist,version=4.7.3062.2</code>。本人尝试了很多Google和百度上的方案，均无效。</p><p>据悉，此Bug仅在旧版Windows10中出现，更旧的Win7和Win8.1似乎不会出现此问题。本人使用LTSB2016，中招。</p><h3 id=how>How</h3><ol start=0><li><p>若有安装旧版<code>VSBuildTools</code>，先卸载并重启。</p></li><li><p>下载安装最新版本的<code>.NET Framework</code>。</p></li><li><p>下载安装<code>VSBuildTools</code>，在看到<code>Microsoft.Net.4.7.2.FullRedist...</code>下载完成时按下暂停。</p></li><li><p>打开Explorer，进入目录<code>%ProgramData%\Microsoft\VisualStudio\Packages</code>。</p></li><li><p>将<strong>所有</strong>名字以<code>Microsoft.Net.4.7.2.FullRedist...</code>开头的文件夹内的安装包替换为同名空程序。在这里提供一个空程序下载：<a href=/res/20200225-130916-001.exe>点我下载</a>。如果不放心就自己编译一个。</p></li></ol><blockquote><p>示例：</p><p>将空程序命名为<code>dotNetFxLatest-x86-x64-AllOS-ENU.exe</code>，替换掉 <code>C:\ProgramData\Microsoft\VisualStudio\Packages\Microsoft.Net.4.7.2.FullRedist,version=4.7.3062.3\dotNetFxLatest-x86-x64-AllOS-ENU.exe</code>。</p><p>当然<strong>不只这一个</strong>，还有语言包等等，都需要替换。</p></blockquote><p>接下来只需按下继续按钮即可。</p></article></main><header class=in id=extra></header></body></html>